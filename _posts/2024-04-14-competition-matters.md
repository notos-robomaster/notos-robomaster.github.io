---
layout: post
title:  competition matters and debugging methods
date:   2024-04-14 21:54:46 +0000
author: "CHENqg"
categories: jekyll update
---

# 备赛物资（最少）

电烙铁*2 | Xt30*5（3公母1公公1母母） | 哨兵底盘分电板*1 | 全向底盘分电板*1 | Xt30公母头*一袋 | 红黑线*一捆 | Can线*一盒 | 锡*一卷（剩余较多的） | 焊台 | 热缩管*一捆（红，黑，蓝，小黑） | 
 Can锁扣*一卷 | 电池*4 | A板（若有备用） | 公母头杜邦线（以防万一软件线出问题）*4根 ｜ 航空线*一捆 | 香蕉头*一袋 | 胶枪*1 | 胶棒*一袋 | 热风枪*1 | 电表*2 | 4pin线（不带卡扣）*3

# 紧急情况备忘录
- A板无供电但其余皆有供电——A板供电线断或烧
- 单摩擦轮不转——检查电调状况，若灯正常，为电调至摩擦轮或者电调至分电板can线断或烧，若灯灭，检查电调与分电板之间供电线

- 双摩擦轮不转——灯正常亮（不太可能，除非两个can全烧或者断）同单摩擦轮，灯不亮，在单摩擦轮基础上再检查电源管理-底盘分电板-云台分电板的ammo供电线（哨兵检查云台中多根电调线是否有断开）

- 拨弹盘无反应——灯正常亮，拨弹盘-A板can断或烧（全向，其他车是电调-云台分电板），灯不亮，检查拨弹盘电调到云台分电板
- Pitch’轴电机无反应——若灯正常，检查电机-云台分电板的can线，若灯不亮，则检查电机-分电板供电线

- Yaw轴电机无反应——同pitch轴，但其中云台分电板换为底盘分电板。如果6020电机正常亮的话，检查软件方面是否can给了控制信号，如果给了控制信号但是电机还是不动的话，debug看6020有没有反馈数据，如果没有反馈数据则可能是can线废掉了。

- 云台全部无反应——灯正常，就是云台分电板到A板can线断或烧（全向拨弹盘为直接A板例外），灯不亮，滑环供电或者电源管理到底盘分电板香蕉头断或烧

- 云台部分无供电——电源管理-底盘分电板-滑环有线断或者烧

- 底盘四轮无反应——检查底盘-滑环-A板can线，灯正常亮

- 单轮无反应——检查轮-底盘分电板的can或者供电线（通过电调是否亮灯判断）

- 裁判系统部件无反应——检查电源管理至其本身的航空线是否脱落（要不是脱落而是断或烧就遭老罪了）若装甲板无反应，检查四板之间的连接线有没有脱落

- 全车发癫——若电调灯颜色不正常，可能是can线1和2接反，若全车正常仍然发癫，我只能说是软件高端局

- 软件检查电机不转的方法：先让硬件确认接线无误之后。再检查代码上面是否有can发送控制电机的信号，如果确认没有问题，进debug检查是否有收到电机反馈的数据，
- 如果没有数据可能是:
*①can线没了* 
*②是代码这边can口没有和硬件那边对上*
*③电机的id没有和代码上面的id对应上*
*④一开始没有设置电机上面的id*

# PID的调试方法
### 建议先调pitch轴的PID，因为相对于YAW轴会好调一些
*下面是以先调Pitch轴电机的PID的例子*

1. 先把can控制yaw轴电机的数据给0
2. 进入debug里面，把对应的PID拖到watch里面来
3. 一开始先把速度环和角度环的I和D都给到0
4. 先给定一个适中的角度环的P值（因为速度的设定值是由角度环的PID计算所得到）
5. 再给一个适中的速度环的P值（这个P值一直调试到你觉得它比较硬，但是又不会很抖的情况）
6. 如果云台始终达不到设置的角度值的话，给大点速度环的i（i建议给的话是零点几的给），给大了i云台相对于之前会更加抖。
7. 上面的内容都调试好之后可以适当的给点角度环和速度环的d值（d值如果给太大的话会出现超调的情况）。
8. Yaw轴电机的调试同上面
##### 注意如果调试过程中电机出现发烫，烫手的情况，马上停止调试，让电机降温之后再进行调试。
##### 其中自瞄的PID相对于其他模式下的PID会出现自瞄模式的I值会比较大的情况。